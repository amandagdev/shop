(this.webpackJsonpshop=this.webpackJsonpshop||[]).push([[0],{29:function(e,t,a){e.exports=a.p+"static/media/cart.93895f2a.svg"},33:function(e,t,a){e.exports=a(69)},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),l=a.n(c),u=(a(38),a(39),a(13)),i=a(1),o=a(6),s=(a(40),a(41),a(29)),m=a.n(s);a(42);function d(e){var t=e.type,a=e.onClick,n=e.children,c=e.className;return r.a.createElement("button",{className:c,type:t,onClick:a},n)}d.defaultProps={onClick:function(){}};var p=a(32),f=a(5),E=a.n(f),v=a(10),_=a(7),b=Object(n.createContext)(),h=function(e){var t=e.children,a=Object(n.useState)([]),c=Object(o.a)(a,2),l=c[0],u=c[1];Object(n.useEffect)((function(){!function(){var e=JSON.parse(window.localStorage.getItem("cart"));e&&u(e)}()}),[]),Object(n.useEffect)((function(){window.localStorage.setItem("cart",JSON.stringify(l))}),[l]);var i=function(){var e=Object(_.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=l.findIndex((function(e){return e.id===t})),l[a].quantity+=1,u(Object(v.a)(l));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Object(_.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=l.findIndex((function(e){return e.id===t.id})))>=0)){e.next=5;break}return l[a].quantity+=1,u(Object(v.a)(l)),e.abrupt("return");case 5:n=Object(p.a)({},t,{quantity:1}),u([].concat(Object(v.a)(l),[n]));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(_.a)(E.a.mark((function e(t){var a,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.findIndex((function(e){return e.id===t})),n=l.filter((function(e){return e.id!==t})),!(l[a].quantity<=1)){e.next=5;break}return u(n),e.abrupt("return");case 5:l[a].quantity-=1,u(Object(v.a)(l));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(b.Provider,{value:{addCart:s,addItems:i,removeItems:m,products:l,setProducts:u}},t)},g=function(){var e=Object(n.useContext)(b);if(!e)throw new Error("useCart must be used within an CartProvider");return e},N=function(e){var t=e.onClick,a=g().products,n=a.reduce((function(e,t){return e+t.quantity}),0);return r.a.createElement("div",{className:"header"},r.a.createElement("div",null,r.a.createElement("h1",null,"SHOP")),r.a.createElement("div",{className:"header__cart"},r.a.createElement(d,{type:"button",className:"button__transparent",onClick:t},r.a.createElement("img",{src:m.a,alt:"Carrinho"})),a.length>0&&r.a.createElement("div",{className:"header__cart--items"},r.a.createElement("span",null,n))))};a(44);function C(e){var t=e.item,a=g().addCart;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"productCard"},r.a.createElement("div",{className:"productCard__image"},t.tag&&r.a.createElement("div",{className:"productCard__image__exclusivity"},r.a.createElement("p",null,t.tag.label)),r.a.createElement("img",{src:t.picture,alt:"imagem"}),t.offer&&r.a.createElement("div",{className:"productCard__image__promotion"},t.offer.label," ",r.a.createElement("span",null,"-",t.offer.value,"%"))),r.a.createElement("div",{className:"productCard__description"},r.a.createElement("p",null,t.name)),r.a.createElement("div",{className:"productCard__button"},r.a.createElement(d,{type:"button",className:"button__primary",onClick:function(){return a(t)}},"Adicionar ao carrinho")),t.price.from?r.a.createElement("div",{className:"productCard__price--promotion"},r.a.createElement("span",{className:"price__promotion"},"R$ ",t.price.to.integers,",",t.price.to.decimals,r.a.createElement("span",{className:"product__price--once"}," ",t.unit)),r.a.createElement("span",null,"R$ ",t.price.from.integers,",",t.price.from.decimals," "),t.installments&&r.a.createElement("span",null,r.a.createElement("strong",null,t.installments.amount,"x")," de"," ",r.a.createElement("strong",null,"R$ ",t.installments.value)," s/juros")):r.a.createElement("div",{className:"productCard__price"},r.a.createElement("span",null,"R$ ",t.price.to.integers,",",t.price.to.decimals," ",r.a.createElement("span",{className:"product__price--once"},t.unit)),t.installments&&r.a.createElement("span",null,t.installments.amount,"x de R$ ",t.installments.value," ","s/juros"))))}a(45),a(46);var y=a(17);function k(e){var t=e.item,a=g(),n=a.addItems,c=a.removeItems;return r.a.createElement("div",{className:"productCart"},r.a.createElement("div",{className:"productCart__image"},r.a.createElement("img",{src:t.picture,alt:"imagem"})),r.a.createElement("div",{className:"productCart__infos"},r.a.createElement("p",null,t.name),r.a.createElement("div",{className:"productCart__count"},r.a.createElement(d,{type:"button",className:"button__count"},r.a.createElement(y.b,{size:20,color:"var(--primary-color)",onClick:function(){return c(t.id)}})),r.a.createElement("input",{type:"text",value:t.quantity,readOnly:!0}),r.a.createElement(d,{type:"button",className:"button__count",onClick:function(){return n(t.id)}},r.a.createElement(y.a,{size:20,color:"var(--primary-color)"}))),r.a.createElement("span",null,"R$ ",t.price.to.integers,",",t.price.to.decimals)))}var O=a(30),j=a.n(O).a.create({baseURL:"https://zs5utiv3ul.execute-api.us-east-1.amazonaws.com/dev/"}),x=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1];return{data:a,request:Object(n.useCallback)(function(){var e=Object(_.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.get(t);case 3:a=e.sent,r(a.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),[])}};function w(e){var t=e.show,a=e.onClick,c=g(),l=c.products,u=c.setProducts,i=x(),s=i.request,m=i.data,p=Object(n.useState)(!1),f=Object(o.a)(p,2),E=f[0],v=f[1],_=Object(n.useState)(!1),b=Object(o.a)(_,2),h=b[0],N=b[1],C=function(e){return/^\d{5}-?\d{3}$/.test(e)},y=function(e){return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)},O=l.reduce((function(e,t){return e+function(e){var t=e.price.to,a=e.quantity,n=t.integers.replace(".","");return+"".concat(n,".").concat(t.decimals)*a}(t)}),0),j=m.freight?y(+m.freight+O):y(O);return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("div",{className:"cart__container",onClick:a},r.a.createElement("div",{className:"cart"},h?r.a.createElement("div",{className:"cart__finish"},r.a.createElement("p",null,"Compra realizada com sucesso!")):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"cart__block"},r.a.createElement("div",{className:"block__products"},"Meus Produtos"),r.a.createElement("div",{className:"block__freight"},r.a.createElement("div",{className:"block__freight--calc"},r.a.createElement("p",null,"Calcular Frete"),r.a.createElement("input",{type:"text",placeholder:"00000-000",required:!0,maxLength:"8",onBlur:function(e){return function(e){if(C(e))return s("freight/".concat(e)),void v(!1);v(!0)}(e.target.value)}})),E&&r.a.createElement("div",{className:"block__freight--error"},r.a.createElement("p",null,"Insira um cep v\xe1lido")))),l.length>0?r.a.createElement("div",{className:"cart__products"},l.map((function(e){return r.a.createElement(k,{key:e.id,item:e})}))):r.a.createElement("div",{className:"cart__products--not"},r.a.createElement("p",null,"Carrinho vazio ):")),r.a.createElement("div",{className:"block__amount"},r.a.createElement("div",null,r.a.createElement("p",null,"Frete:"),r.a.createElement("span",null,m.freight?y(m.freight):y(0))),r.a.createElement("div",null,r.a.createElement("p",null,"Subtotal:"),r.a.createElement("span",null,j)),r.a.createElement(d,{type:"button",className:"button__cart",onClick:function(){N(!0),u([])}},"Comprar"))))):null)}function q(){var e=x(),t=e.request,a=e.data,c=Object(n.useState)(!1),l=Object(o.a)(c,2),u=l[0],i=l[1];Object(n.useEffect)((function(){t("products")}),[]);var s=function(){i((function(e){return!e}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,{onClick:s}),r.a.createElement(w,{onClick:function(e){e.target===e.currentTarget&&s()},show:u}),r.a.createElement("div",{className:"home"},r.a.createElement("h2",null,"Produtos"),r.a.createElement("div",{className:"home__products"},a.map((function(e){return r.a.createElement(C,{key:e.id,item:e})})))))}function S(){return r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:q}))}function I(e){var t=e.children;return r.a.createElement(h,null,t)}var R=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null,r.a.createElement(I,null,r.a.createElement(S,null))))};l.a.render(r.a.createElement(R,null),document.querySelector("#root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.609ce5c4.chunk.js.map